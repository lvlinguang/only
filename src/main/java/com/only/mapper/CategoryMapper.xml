<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.only.mapper.GroupMapper">

	<!-- 添加分类 -->
	<insert id="addCategory" useGeneratedKeys="true" keyProperty="id">
		insert into
		Category(Name,DesCription,CanShow,Icon,Sequence)
		values(#{name},#{description},#{canshow},#{icon},#{sequence})
	</insert>

	<!-- 修改分类 -->
	<update id="updateCategory">
		update Category
		<set>
			<if test="name!=null and name !=''">Name=#{name}</if>
			<if test="description!=null and description !=''">DesCription=#{description}</if>
			<if test="canshow!=null and canshow !=''">Canshow=#{canshow}</if>
			<if test="icon!=null and icon !=''">Icon=#{icon}</if>
			<if test="sequence!=null and sequence !=''">Sequence=#{sequence}</if>
		</set>
	</update>

	<!-- 删除分类 -->
	<update id="deleteCategory" parameterType="int">
		update Category set
		Enable=0 where ID=#{id}
	</update>

	<!-- 分类列表总数 -->
	<select id="getCategoryListTotal" resultType="int">
		select count(0)
		where Enable=1
		<if test="name!=null and name!=''">
			and Name like concat('%',#{name},'%')
		</if>
	</select>


	<!-- 分类列表 -->
	<select id="getCategoryList" resultType="com.only.model.Category">
		select
		ID,
		Name,
		CanShow,
		Icon,
		Sequence,
		DesCription,
		CreateDate,
		UpdateDate
		where Enable=1
		<if test="name!=null and name!=''">
			and Name like concat('%',#{name},'%')
		</if>
		<if test="page!=null">
			<if test="page.sort!=null and page.sort!=''">
				order by #{page.sort} #{page.order}
			</if>
			<if test="page.pageIndex>0">
				limit #{page.start},#{page.end}
			</if>
		</if>
	</select>


</mapper>